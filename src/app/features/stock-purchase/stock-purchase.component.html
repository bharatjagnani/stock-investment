<div class="fluid-container">
    <div class="row text-center">
        <div class="col-lg-12">
            <h2>Stock Investment Detail</h2>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-lg-6">
            <div class="row">
                <div class="col-lg-1">
                    <label>User:</label>
                </div>
                <div class="col-lg-1">
                    <span>{{userName}}</span>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="row">
                <div class="col-lg-5">
                    <label>Current Investment:</label>
                </div>
                <div class="col-lg-3">
                    <span>{{currentInvestment | number:'1.2-2'}}</span>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="row">
                <div class="col-lg-4">
                    <label>Current Value:</label>
                </div>
                <div class="col-lg-4">
                    <span>{{current | number:'1.2-2'}}</span>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="row">
                <div class="col-lg-4">
                    <label>Profit/Loss:</label>
                </div>
                <div class="col-lg-4">
                    <span>{{profitLoss | number:'1.2-2'}}</span>
                </div>
            </div>
        </div>
    </div>

    <br />
    <div class="row">
        <div class="col-lg-4 align-center">
            <button pButton type="button" label="Add New Stock Purchase" class="fa fa-solid fa-cart-plus"
                (click)="addNewStockPurchaseDetail.showNewStockPurchaseDetailTemplate()"></button>
        </div>
        <div class="col-lg-4 align-center">
            <button pButton type="button" label="Sell Stock" class=" fa fa-solid fa-cart-arrow-down"
                (click)="sellStockDetail.showSellStockTemplate()"></button>
        </div>

        <div class="col-lg-4 align-center">
            <button pButton type="button" label="Analysis" class="fa fa-bar-chart"
                (click)="stockInvestmentAnalysis.showstockInvestmentAnalysisTemplate()"></button>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-lg-12">
            <p-table [value]="stockPurchaseDetails" [resizableColumns]=true immutable=false loadingIcon="fa fa-spinner"
                [rows]="10" [rowsPerPageOptions]="[10,20]" [paginator]=true [pageLinks]="3" dataKey="purchaseId"
                editable=true>
                <ng-template pTemplate="header">

                    <tr>
                        <th style="text-align:center" headerStyleClass="datatable-header" header="Purchase ID"
                            [pSortableColumn]="'id'">
                            Purchase ID
                            <p-sortIcon [field]="'purchaseId'"></p-sortIcon>
                        </th>

                        <th style="text-align:center" headerStyleClass="datatable-header" header="Owner"
                            [pSortableColumn]="'user.userName'">
                            Owner
                            <p-sortIcon [field]="'userName'"></p-sortIcon>
                        </th>



                        <th style="text-align:center" headerStyleClass="datatable-header" header="Stock Name"
                            [pSortableColumn]="'stockDetail.stockName'">
                            Stock Name
                            <p-sortIcon [field]="'stockName'"></p-sortIcon>
                        </th>

                        <th style="text-align:center" headerStyleClass="datatable-header" header="Action"
                            [pSortableColumn]="'stockAction'">
                            Action
                            <p-sortIcon [field]="'stockAction'"></p-sortIcon>
                        </th>

                        <th style="text-align:center" headerStyleClass="datatable-header" header="Date"
                            [pSortableColumn]="'stockDate'">
                            Date
                            <p-sortIcon [field]="'stockDate'"></p-sortIcon>
                        </th>


                        <th style="text-align:center" headerStyleClass="datatable-header" header="Quantity"
                            [pSortableColumn]="'stockQty'">
                            Quantity
                            <p-sortIcon [field]="'stockQty'"></p-sortIcon>
                        </th>

                        <th style="text-align:center" headerStyleClass="datatable-header" header="Stock Purchase Rate"
                            [pSortableColumn]="'stockRate'">
                            Rate
                            <p-sortIcon [field]="'stockRate'"></p-sortIcon>
                        </th>



                        <th style="text-align:center" headerStyleClass="datatable-header" header="Invest"
                            [pSortableColumn]="'invest'">
                            Invest
                            <p-sortIcon [field]="'invest'"></p-sortIcon>
                        </th>

                        <th style="text-align:center" headerStyleClass="datatable-header" header="Current Rate"
                            [pSortableColumn]="'stockDetail.stockCurRate'">
                            Current Rate
                            <p-sortIcon [field]="'stockCurRate'"></p-sortIcon>
                        </th>

                        <th style="text-align:center" headerStyleClass="datatable-header" header="Current">
                            Current
                        </th>


                        <th style="text-align:center" headerStyleClass="datatable-header" header="Create Time Stamp"
                            [pSortableColumn]="'createTimeStamp'">
                            Create Time Stamp
                            <p-sortIcon [field]="'createTimeStamp'"></p-sortIcon>
                        </th>


                        <th style="text-align:center" headerStyleClass="datatable-header" header="Update Time Stamp"
                            [pSortableColumn]="'updateTimeStamp'">
                            Update Time Stamp
                            <p-sortIcon [field]="'updateTimeStamp'"></p-sortIcon>
                        </th>

                        <th style="text-align:center" headerStyleClass="datatable-header" header="Delete Row">
                            Delete Record
                        </th>

                    </tr>

                </ng-template>

                <ng-template pTemplate="body" let-purchaseDetail>
                    <tr>
                        <td style="text-align:center">{{ purchaseDetail.id}}</td>

                        <td style="text-align:center">{{ purchaseDetail.user.userName}}</td>

                        <td style="text-align:center">{{ purchaseDetail.stockDetail.stockName}}</td>

                        <td style="text-align:center">{{ purchaseDetail.stockAction}}</td>

                        <td style="text-align:center">{{ purchaseDetail.stockDate}}</td>

                        <td style="text-align:center">{{ purchaseDetail.stockQty}}</td>

                        <td style="text-align:center">{{ purchaseDetail.stockRate | number:'1.2-2'}}</td>

                        <td style="text-align:center">{{ purchaseDetail.invest | number:'1.2-2'}}</td>

                        <td style="text-align:center">{{ purchaseDetail.stockDetail.stockCurRate | number:'1.2-2'}}</td>

                        <td style="text-align:center">{{ purchaseDetail.stockDetail.stockCurRate *
                            purchaseDetail.stockQty | number:'1.2-2'}}</td>

                        <td style="text-align:center">{{ purchaseDetail.createTimeStamp}}</td>

                        <td style="text-align:center">{{ purchaseDetail.updateTimeStamp}}</td>

                        <td style="text-align:center">
                            <button type="button" class="ui-button" icon="fa fa-trash-o" pButton
                                (click)="deleteRecord(purchaseDetail)">
                            </button>
                        </td>
                    </tr>

                </ng-template>
            </p-table>
        </div>
    </div>
    <app-add-new-stock-purchase-detail #addNewStockPurchaseDetail></app-add-new-stock-purchase-detail>
    <app-sell-stock-detail #sellStockDetail></app-sell-stock-detail>
    <app-stock-analysis #stockInvestmentAnalysis [stockResponse]='stockResponse' [userName]='userName'>
    </app-stock-analysis>
</div>